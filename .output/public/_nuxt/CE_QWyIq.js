import{f as C,g as j,G as v,H as S,Y as k,c as s,a,z as n,b as l,t as x,w as h,F as q,x as D,y as $,o as r,s as B,d as _,v as N}from"./CoOn5R3x.js";const z={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6"},O={class:"max-w-3xl mx-auto px-4"},T={class:"mb-6"},V={key:0,class:"flex justify-center items-center py-20"},F={key:1,class:"text-center py-20"},I={class:"text-red-600 mb-4"},L={key:2,class:"text-center py-20"},U={key:3,class:"space-y-4"},A=["onClick"],E={class:"flex items-center gap-4"},G={class:"w-8 text-gray-600 dark:text-gray-400 font-medium"},H={class:"flex-1 text-gray-900 dark:text-gray-100"},J={class:"flex-shrink-0"},M={key:0,class:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg"},R={key:1,class:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg"},Y={key:2,class:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg"},K={class:"sticky bottom-0 pt-6 pb-4 bg-gray-50 dark:bg-gray-900"},X=C({__name:"attendance",setup(P){const g=j(),c=v([]),b=v(!0),m=v(!1),u=v(null),t=v({}),f=d=>{const e=c.value[d];if(!e)return;switch(e.status){case"present":e.status="absent";break;case"absent":e.status="late";break;case"late":e.status="present";break}},w=async()=>{try{m.value=!0,await k.post("/jadval/save",{fl:t.value.fl,dvindex:t.value.dvid,isdone:t.value.isdone,students:c.value}),g.push("/jadval")}catch{u.value="Davomatni saqlashda xatolik"}finally{m.value=!1}};return S(async()=>{if(t.value=JSON.parse(localStorage.getItem("selectedDv")||"{}"),t.value.dvid&&t.value.fl)try{b.value=!0,u.value=null;const d=await k.post("/jadval/getstudent",{fanid:t.value.fanid,fl:t.value.fl,dvindex:t.value.dvid,isdone:t.value.isdone});c.value=d.data||[]}catch{u.value="Talabalarni yuklashda xatolik"}finally{b.value=!1}else g.push("/jadval")}),(d,e)=>{const i=B,y=$;return r(),s("div",z,[a("div",O,[a("div",T,[a("button",{onClick:e[0]||(e[0]=o=>n(g).push("/jadval")),class:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-4"},[l(i,{name:"i-heroicons-arrow-left",class:"w-5 h-5"}),e[2]||(e[2]=a("span",null,"Orqaga",-1))]),e[3]||(e[3]=a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Davomat",-1))]),n(b)?(r(),s("div",V,[l(i,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-blue-500"})])):n(u)?(r(),s("div",F,[a("p",I,x(n(u)),1),l(y,{onClick:e[1]||(e[1]=o=>n(g).push("/jadval")),color:"primary"},{default:h(()=>[...e[4]||(e[4]=[_(" Orqaga qaytish ",-1)])]),_:1})])):n(c).length===0?(r(),s("div",L,[...e[5]||(e[5]=[a("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"Talabalar topilmadi",-1)])])):(r(),s("div",U,[(r(!0),s(q,null,D(n(c),(o,p)=>(r(),s("div",{key:o.stid,onClick:Q=>f(p),class:N(["bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm cursor-pointer transition-all hover:shadow-md",{"border-2 border-green-200 dark:border-green-700":o.status==="present","border-2 border-red-200 dark:border-red-700":o.status==="absent","border-2 border-amber-200 dark:border-amber-700":o.status==="late"}])},[a("div",E,[a("div",G,x(p+1),1),a("div",H,x(o.ism),1),a("div",J,[o.status==="present"?(r(),s("div",M,[l(i,{name:"i-heroicons-check",class:"w-5 h-5 text-green-600 dark:text-green-400"})])):o.status==="late"?(r(),s("div",R,[l(i,{name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-amber-600 dark:text-amber-400"})])):(r(),s("div",Y,[l(i,{name:"i-heroicons-x-mark",class:"w-5 h-5 text-red-600 dark:text-red-400"})]))])])],10,A))),128)),a("div",K,[l(y,{onClick:w,loading:n(m),disabled:n(m),color:"primary",size:"xl",block:""},{default:h(()=>[...e[6]||(e[6]=[_(" Davomatni saqlash ",-1)])]),_:1},8,["loading","disabled"])])]))])])}}});export{X as default};
