import{f as p,g as B,G as m,H as J,Y as S,c as o,z as i,o as r,b as n,s as k,a as e,F as b,x as v,v as D,n as T,t as l,k as j,m as h,w as C,d as I,y as M,_ as N}from"./CoOn5R3x.js";import{_ as U}from"./Cr3r_iKe.js";const V={key:0,class:"flex justify-center items-center py-12"},z={key:1,class:"text-center py-12"},F={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},O=["onClick"],H={class:"absolute top-4 right-4"},L={class:"p-2 bg-white dark:bg-gray-800 rounded-lg"},Y={class:"relative p-5 space-y-4"},E={class:"flex items-start justify-between gap-3 pr-8"},G={class:"flex items-center gap-3 flex-1 min-w-0"},K={class:"flex items-center justify-center w-10 h-10 rounded-lg bg-white dark:bg-gray-800 shadow-sm"},P={class:"font-bold text-lg truncate text-gray-900 dark:text-gray-100"},R={class:"space-y-2"},A={class:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"},Q={class:"truncate"},W={class:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"},X={class:"truncate"},Z={class:"flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-800"},ee={class:"flex items-center gap-4"},te={class:"text-center"},ae={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},se={class:"text-center"},re={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},oe={class:"text-center"},ne={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},de={key:0,class:"flex items-start gap-2 p-3 rounded-lg text-xs font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"},le={class:"flex-1"},ie=p({__name:"today",setup(f){const c=B(),_=m([]),g=m(!0);J(async()=>{await S.get("/jadval").then(d=>{_.value=d.data.data,g.value=!1}).catch(d=>{console.log(d),g.value=!1})});const u=(d,a,s,t)=>{localStorage.setItem("selectedDv",JSON.stringify({dvid:d,isdone:a,fanid:s,fl:t})),c.push("/jadval/attendance")},y=d=>({red:{bg:"bg-red-50 dark:bg-red-950/30",border:"border-red-200 dark:border-red-800",text:"text-red-700 dark:text-red-400",badge:"red"},green:{bg:"bg-green-50 dark:bg-green-950/30",border:"border-green-200 dark:border-green-800",text:"text-green-700 dark:text-green-400",badge:"green"},yellow:{bg:"bg-yellow-50 dark:bg-yellow-950/30",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-400",badge:"yellow"},blue:{bg:"bg-blue-50 dark:bg-blue-950/30",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-400",badge:"blue"},orange:{bg:"bg-orange-50 dark:bg-orange-950/30",border:"border-orange-200 dark:border-orange-800",text:"text-orange-700 dark:text-orange-400",badge:"orange"}})[d]||{bg:"bg-gray-50 dark:bg-gray-950/30",border:"border-gray-200 dark:border-gray-800",text:"text-gray-700 dark:text-gray-400",badge:"gray"};return(d,a)=>{const s=k;return i(g)?(r(),o("div",V,[n(s,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin"})])):i(_).length===0?(r(),o("div",z,[n(s,{name:"i-heroicons-calendar-days",class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a[0]||(a[0]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Jadval topilmadi",-1))])):(r(),o("div",F,[(r(!0),o(b,null,v(i(_),t=>(r(),o("div",{key:t.id,class:D(["relative overflow-hidden rounded-xl border transition-all duration-300 cursor-pointer","hover:scale-[1.02] hover:shadow-xl",y(t.color).bg,y(t.color).border]),onClick:w=>u(t.id,t.isdone,t.fanid,t.fl)},[e("div",H,[e("div",L,[n(s,{name:"i-heroicons-clock",class:"w-6 h-6 text-gray-400 dark:text-gray-600"})])]),e("div",Y,[e("div",E,[e("div",G,[e("div",K,[n(s,{name:"i-heroicons-user-group",class:"w-6 h-6 text-gray-700 dark:text-gray-300"})]),e("h3",P,l(t.gnom),1)])]),e("div",R,[e("div",A,[n(s,{name:"i-heroicons-map-pin-solid",class:"w-4 h-4 flex-shrink-0"}),e("span",Q,l(t.xona),1)]),e("div",W,[n(s,{name:"i-heroicons-clock-solid",class:"w-4 h-4 flex-shrink-0"}),e("span",X,l(t.vaqt),1)])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",ae,l(t.present),1),a[1]||(a[1]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Keldi",-1))]),a[3]||(a[3]=e("div",{class:"w-px h-10 bg-gray-300 dark:bg-gray-700"},null,-1)),e("div",se,[e("div",re,l(t.jami),1),a[2]||(a[2]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Jami",-1))])]),e("div",oe,[e("div",ne,l(Math.round(t.present/t.jami*100))+"% ",1),a[4]||(a[4]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Foiz",-1))])]),t.statusText?(r(),o("div",de,[n(s,{name:"i-heroicons-information-circle-solid",class:"w-4 h-4 flex-shrink-0 mt-0.5"}),e("span",le,l(t.statusText),1)])):T("",!0)])],10,O))),128))]))}}}),ce=Object.assign(ie,{__name:"JadvalToday"}),ge={class:"max-w-lg mx-auto space-y-4"},xe={key:0,class:"flex justify-center py-8"},_e={class:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},ye={key:0,class:"space-y-3"},ue={class:"flex items-start gap-3"},me={class:"flex-shrink-0 mt-1"},be={class:"flex-1 min-w-0"},he={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ve={class:"flex items-center gap-2 mt-1"},pe={class:"text-base font-medium text-gray-800 dark:text-gray-200"},ke={class:"flex items-center gap-4 mt-2 text-sm text-gray-600 dark:text-gray-400"},fe={class:"flex items-center gap-1.5"},we={class:"flex items-center gap-1.5"},$e={key:1,class:"text-center py-12"},je=p({__name:"schedule",setup(f){const c=m([]),_=m(!0),g=m(null),u={0:"Dushanba",1:"Seshanba",2:"Chorshanba",3:"Payshanba",4:"Juma",5:"Shanba",6:"Yakshanba",7:"Toq kunlar",8:"Juft kunlar"},y=j(()=>[...new Set(c.value.map(s=>s.kun))].sort((s,t)=>s-t)),d=j(()=>g.value===null?[]:c.value.filter(a=>a.kun===g.value).sort((a,s)=>a.vaqt.localeCompare(s.vaqt)));return J(async()=>{try{const a=await S.get("/jadval/schedule");c.value=a.data||[],y.value.length>0&&(g.value=y.value[0]??null),_.value=!1}catch(a){console.error("Failed to load schedule:",a),_.value=!1}}),(a,s)=>{const t=k,w=M,q=U;return r(),o("div",ge,[i(_)?(r(),o("div",xe,[n(t,{name:"i-heroicons-arrow-path",class:"w-6 h-6 animate-spin"})])):(r(),o(b,{key:1},[e("div",_e,[(r(!0),o(b,null,v(i(y),x=>(r(),h(w,{key:x,variant:i(g)===x?"solid":"soft",color:i(g)===x?"primary":"neutral",size:"sm",onClick:$=>g.value=x},{default:C(()=>[I(l(u[x]),1)]),_:2},1032,["variant","color","onClick"]))),128))]),i(d).length>0?(r(),o("div",ye,[(r(!0),o(b,null,v(i(d),(x,$)=>(r(),h(q,{key:$},{default:C(()=>[e("div",ue,[e("div",me,[n(t,{name:"i-heroicons-clock",class:"w-5 h-5 text-primary"})]),e("div",be,[e("div",he,l(x.vaqt),1),e("div",ve,[n(t,{name:"i-heroicons-user-group",class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e("span",pe,l(x.gnom),1)]),e("div",ke,[e("div",fe,[n(t,{name:"i-heroicons-users",class:"w-4 h-4"}),e("span",null,l(x.son)+" o'quvchi",1)]),e("div",we,[n(t,{name:"i-heroicons-building-office-2",class:"w-4 h-4"}),e("span",null,l(x.xona),1)])])])])]),_:2},1024))),128))])):(r(),o("div",$e,[n(t,{name:"i-heroicons-calendar-days",class:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-600 mb-3"}),s[0]||(s[0]=e("p",{class:"text-gray-600 dark:text-gray-400"}," Bu kun uchun darslar yo'q ",-1))]))],64))])}}}),Ce=Object.assign(N(je,[["__scopeId","data-v-cdb9b2f3"]]),{__name:"JadvalSchedule"}),Je={class:"p-4 md:p-6"},Se={class:"mb-6 flex items-start justify-between gap-4"},qe=["title"],Te=p({__name:"index",setup(f){const c=m("today"),_=()=>{c.value=c.value==="today"?"schedule":"today"};return(g,u)=>{const y=k,d=ce,a=Ce;return r(),o("div",Je,[e("div",Se,[u[0]||(u[0]=e("div",null,[e("h1",{class:"text-2xl md:text-3xl font-bold"},"Jadval"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Dars jadvali va davomat")],-1)),e("button",{onClick:_,class:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:i(c)==="today"?"Haftalik jadvalga o'tish":"Bugungi darslar"},[n(y,{name:i(c)==="today"?"i-heroicons-calendar-days":"i-heroicons-clock",class:"w-5 h-5 text-gray-700 dark:text-gray-300"},null,8,["name"])],8,qe)]),i(c)==="today"?(r(),h(d,{key:0})):(r(),h(a,{key:1}))])}}});export{Te as default};
