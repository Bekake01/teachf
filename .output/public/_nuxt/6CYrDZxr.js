import{f,g as v,G as x,H as w,Y as j,c as r,a as e,z as o,b as i,t as d,w as C,F as S,x as N,y as q,o as n,s as B,d as D,v as h,n as T}from"./CoOn5R3x.js";const V={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-4 sm:py-6"},$={class:"max-w-4xl mx-auto px-4"},I={class:"mb-6"},K={key:0,class:"flex justify-center items-center py-20"},L={key:1,class:"text-center py-20"},O={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 mb-4"},z={class:"text-red-600 dark:text-red-400 mb-4 text-sm sm:text-base"},A={key:2,class:"text-center py-20"},E={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 mb-4"},F={key:3,class:"space-y-4 sm:space-y-6"},M={class:"bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-sm border border-blue-100 dark:border-blue-900/50"},U={class:"grid grid-cols-3 gap-3 sm:gap-6"},G={class:"text-center"},H={class:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-green-50 dark:bg-green-900/30 mb-2"},J={class:"text-lg sm:text-2xl font-bold text-green-700 dark:text-green-400"},R={class:"text-center"},Y={class:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-amber-50 dark:bg-amber-900/30 mb-2"},P={class:"text-lg sm:text-2xl font-bold text-amber-700 dark:text-amber-400"},Q={class:"text-center"},W={class:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-red-50 dark:bg-red-900/30 mb-2"},X={class:"text-lg sm:text-2xl font-bold text-red-700 dark:text-red-400"},Z={class:"space-y-2 sm:space-y-3"},ee={class:"p-3 sm:p-4"},te={class:"flex items-center gap-3 sm:gap-4"},se={class:"flex-shrink-0 w-6 sm:w-8 text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base"},ae={class:"flex-1 min-w-0"},re={class:"text-gray-900 dark:text-gray-100 font-medium text-sm sm:text-base truncate sm:whitespace-normal"},ne={class:"flex-shrink-0"},oe={key:0,class:"px-3 pb-3 sm:px-4 sm:pb-4"},de={class:"bg-gray-50 dark:bg-gray-900/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700"},le={class:"flex gap-2"},ie={class:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 font-medium"},xe=f({__name:"history",setup(me){const g=v(),l=x([]),b=x(!0),c=x(null),u=x(null),y=a=>{switch(a){case"present":return"i-heroicons-check";case"late":return"i-heroicons-exclamation-triangle";case"absent":return"i-heroicons-x-mark";default:return"i-heroicons-question-mark-circle"}},p=()=>({present:l.value.filter(a=>a.status==="present").length,late:l.value.filter(a=>a.status==="late").length,absent:l.value.filter(a=>a.status==="absent").length});return w(async()=>{const a=localStorage.getItem("selectedDv");if(!a){g.push("/davomat");return}u.value=JSON.parse(a);try{b.value=!0,c.value=null;const t=await j.post("/davomat/students",{id:u.value.dvid,fl:u.value.fl});l.value=t.data||[]}catch(t){c.value="Talabalarni yuklashda xatolik",console.error(t)}finally{b.value=!1}}),(a,t)=>{const m=B,_=q;return n(),r("div",V,[e("div",$,[e("div",I,[e("button",{onClick:t[0]||(t[0]=s=>o(g).push("/davomat")),class:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-4 transition-colors"},[i(m,{name:"i-heroicons-arrow-left",class:"w-5 h-5"}),t[2]||(t[2]=e("span",{class:"text-sm sm:text-base"},"Orqaga",-1))]),t[3]||(t[3]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100"},"Davomat tarixi",-1))]),o(b)?(n(),r("div",K,[i(m,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-blue-500 dark:text-blue-400"})])):o(c)?(n(),r("div",L,[e("div",O,[i(m,{name:"i-heroicons-exclamation-circle",class:"w-8 h-8 text-red-600 dark:text-red-400"})]),e("p",z,d(o(c)),1),i(_,{onClick:t[1]||(t[1]=s=>o(g).push("/davomat")),color:"primary"},{default:C(()=>[...t[4]||(t[4]=[D(" Orqaga qaytish ",-1)])]),_:1})])):o(l).length===0?(n(),r("div",A,[e("div",E,[i(m,{name:"i-heroicons-users",class:"w-8 h-8 text-gray-400 dark:text-gray-500"})]),t[5]||(t[5]=e("p",{class:"text-gray-500 dark:text-gray-400 text-base sm:text-lg"},"Talabalar topilmadi",-1))])):(n(),r("div",F,[e("div",M,[e("div",U,[e("div",G,[e("div",H,[e("span",J,d(p().present),1)]),t[6]||(t[6]=e("p",{class:"text-xs sm:text-sm font-medium text-green-700 dark:text-green-400"},"Keldi",-1))]),e("div",R,[e("div",Y,[e("span",P,d(p().late),1)]),t[7]||(t[7]=e("p",{class:"text-xs sm:text-sm font-medium text-amber-700 dark:text-amber-400"},"Kech",-1))]),e("div",Q,[e("div",W,[e("span",X,d(p().absent),1)]),t[8]||(t[8]=e("p",{class:"text-xs sm:text-sm font-medium text-red-700 dark:text-red-400"},"Kelmadi",-1))])])]),e("div",Z,[(n(!0),r(S,null,N(o(l),(s,k)=>(n(),r("div",{key:s.stid,class:h(["bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl shadow-sm overflow-hidden",{"border-2 border-green-100 dark:border-green-900/50":s.status==="present","border-2 border-red-100 dark:border-red-900/50":s.status==="absent","border-2 border-amber-100 dark:border-amber-900/50":s.status==="late"}])},[e("div",ee,[e("div",te,[e("div",se,d(k+1),1),e("div",ae,[e("p",re,d(s.ism),1)]),e("div",ne,[e("div",{class:h(["p-2 sm:p-2.5 rounded-lg sm:rounded-xl",{"bg-green-100 dark:bg-green-900/40":s.status==="present","bg-amber-100 dark:bg-amber-900/40":s.status==="late","bg-red-100 dark:bg-red-900/40":s.status==="absent","bg-gray-100 dark:bg-gray-700":!["present","late","absent"].includes(s.status)}])},[i(m,{name:y(s.status),class:h(["w-4 h-4 sm:w-5 sm:h-5",{"text-green-600 dark:text-green-400":s.status==="present","text-amber-600 dark:text-amber-400":s.status==="late","text-red-600 dark:text-red-400":s.status==="absent","text-gray-600 dark:text-gray-400":!["present","late","absent"].includes(s.status)}])},null,8,["name","class"])],2)])])]),s.note&&s.note.trim()?(n(),r("div",oe,[e("div",de,[e("div",le,[t[9]||(t[9]=e("span",{class:"text-xs sm:text-sm font-bold text-gray-800 dark:text-gray-200 flex-shrink-0"}," ESLATMA: ",-1)),e("p",ie,d(s.note),1)])])])):T("",!0)],2))),128))])]))])])}}});export{xe as default};
